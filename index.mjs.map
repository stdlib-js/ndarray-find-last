{"version":3,"file":"index.mjs","sources":["../lib/callback_wrapper.js","../lib/main.js","../lib/assign.js","../lib/index.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2026 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// VARIABLES //\n\nimport getShape from '@stdlib/ndarray-shape';\n\n\n// FUNCTIONS //\n\n/**\n* Returns complement indices.\n*\n* ## Notes\n*\n* -   The function mutates the input array.\n*\n* @private\n* @param {NonNegativeIntegerArray} idx - input array containing input indices\n* @param {NonNegativeIntegerArray} shape - array shape\n* @returns {NonNegativeIntegerArray} input array\n*\n* @example\n* var shape = [ 4, 4, 4 ];\n*\n* var idx = [ 0, 0, 0 ];\n* var out = complementIndices( idx, shape );\n* // returns [ 3, 3, 3 ]\n*\n* idx = [ 3, 3, 3 ];\n* var out = complementIndices( idx, shape );\n* // returns [ 0, 0, 0 ]\n*\n* idx = [ 0, 1, 2 ];\n* var out = complementIndices( idx, shape );\n* // returns [ 3, 2, 1 ]\n*/\nfunction complementIndices( idx, shape ) {\n\tvar i;\n\tfor ( i = 0; i < shape.length; i++ ) {\n\t\tidx[ i ] = shape[ i ] - idx[ i ] - 1;\n\t}\n\treturn idx;\n}\n\n\n// MAIN //\n\n/**\n* Wraps a provided callback function.\n*\n* @private\n* @param {ndarrayLike} arr - input ndarray\n* @param {Function} clbk - callback function\n* @param {thisArg} thisArg - callback execution context\n* @returns {Function} callback wrapper\n*/\nfunction wrap( arr, clbk, thisArg ) {\n\tvar sh = getShape( arr );\n\treturn wrapper;\n\n\t/**\n\t* Invokes a callback function.\n\t*\n\t* @private\n\t* @param {*} v - value\n\t* @param {NonNegativeIntegerArray} idx - current array element indices\n\t* @returns {*} result\n\t*/\n\tfunction wrapper( v, idx ) {\n\t\treturn clbk.call( thisArg, v, complementIndices( idx, sh ), arr );\n\t}\n}\n\n\n// EXPORTS //\n\nexport default wrap;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2026 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport isFunction from '@stdlib/assert-is-function';\nimport isndarrayLike from '@stdlib/assert-is-ndarray-like';\nimport reverse from '@stdlib/ndarray-base-reverse';\nimport find from '@stdlib/ndarray-find'; // eslint-disable-line stdlib/no-redeclare\nimport format from '@stdlib/error-tools-fmtprodmsg';\nimport wrap from './callback_wrapper.js';\n\n\n// MAIN //\n\n/**\n* Returns a new ndarray containing the last elements which pass a test implemented by a predicate function along one or more ndarray dimensions.\n*\n* @param {ndarray} x - input ndarray\n* @param {Options} [options] - function options\n* @param {IntegerArray} [options.dims] - list of dimensions over which to perform a reduction\n* @param {boolean} [options.keepdims=false] - boolean indicating whether the reduced dimensions should be included in the returned ndarray as singleton dimensions\n* @param {(*|ndarray)} [options.sentinel] - sentinel value\n* @param {Function} predicate - predicate function\n* @param {*} [thisArg] - predicate function execution context\n* @throws {TypeError} first argument must be an ndarray-like object\n* @throws {TypeError} options argument must be an object\n* @throws {TypeError} predicate argument must be a function\n* @throws {RangeError} dimension indices must not exceed input ndarray bounds\n* @throws {RangeError} number of dimension indices must not exceed the number of input ndarray dimensions\n* @throws {Error} must provide valid options\n* @returns {ndarray} output ndarray\n*\n* @example\n* import { isPrimitive as isEven } from '@stdlib/assert-is-even';\n* import array from '@stdlib/ndarray-array';\n*\n* // Create an input ndarray:\n* var x = array( [ [ [ 1.0, 2.0 ], [ 3.0, 4.0 ] ], [ [ 5.0, 6.0 ], [ 7.0, 8.0 ] ] ] );\n* // returns <ndarray>\n*\n* // Perform reduction:\n* var out = findLast( x, isEven );\n* // returns <ndarray>[ 8.0 ]\n*/\nfunction findLast( x, options, predicate, thisArg ) {\n\tvar viewX;\n\tvar nargs;\n\tvar flg;\n\tvar ctx;\n\tvar out;\n\tvar cb;\n\tvar o;\n\tvar f;\n\n\tnargs = arguments.length;\n\tif ( !isndarrayLike( x ) ) {\n\t\tthrow new TypeError( format( 'null5t', x ) );\n\t}\n\t// Case: findLast( x, predicate )\n\tif ( nargs < 3 ) {\n\t\tcb = options;\n\t\tif ( !isFunction( cb ) ) {\n\t\t\tthrow new TypeError( format( 'null2b', cb ) );\n\t\t}\n\t}\n\t// Case: findLast( x, options, predicate, thisArg )\n\telse if ( nargs > 3 ) {\n\t\tflg = true;\n\t\to = options;\n\t\tcb = predicate;\n\t\tif ( !isFunction( cb ) ) {\n\t\t\tthrow new TypeError( format( 'null2b', cb ) );\n\t\t}\n\t\tctx = thisArg;\n\t}\n\t// Case: findLast( x, predicate, thisArg )\n\telse if ( isFunction( options ) ) {\n\t\tcb = options;\n\t\tctx = predicate;\n\t}\n\t// Case: findLast( x, options, predicate )\n\telse if ( isFunction( predicate ) ) {\n\t\tflg = true;\n\t\to = options;\n\t\tcb = predicate;\n\t}\n\t// Case: find( x, ???, ??? )\n\telse {\n\t\tthrow new TypeError( format( 'null2b', predicate ) );\n\t}\n\t// Create a reversed view of the input ndarray so that we iterate from last-to-first, rather than first-to-last:\n\tviewX = reverse( x, false );\n\n\t// Wrap the callback function to ensure that the input ndarray is passed as an argument to a provided callback and not the view:\n\tf = wrap( x, cb, ctx );\n\n\t// Delegate to `find` to perform actual search...\n\tif ( flg ) {\n\t\tout = find( viewX, o, f );\n\t} else {\n\t\tout = find( viewX, f );\n\t}\n\t// Because `find` iterates from first-to-last, we need to return a \"flipped\"/transposed view back to the user:\n\treturn reverse( out, true );\n}\n\n\n// EXPORTS //\n\nexport default findLast;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2026 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport isFunction from '@stdlib/assert-is-function';\nimport isndarrayLike from '@stdlib/assert-is-ndarray-like';\nimport reverse from '@stdlib/ndarray-base-reverse';\nimport { assign as find } from '@stdlib/ndarray-find'; // eslint-disable-line stdlib/no-redeclare\nimport format from '@stdlib/error-tools-fmtprodmsg';\nimport wrap from './callback_wrapper.js';\n\n\n// MAIN //\n\n/**\n* Finds the last elements which pass a test implemented by a predicate function along one or more ndarray dimensions and assigns results to a provided output ndarray.\n*\n* @param {ndarray} x - input ndarray\n* @param {ndarray} out - output ndarray\n* @param {Options} [options] - function options\n* @param {IntegerArray} [options.dims] - list of dimensions over which to perform a reduction\n* @param {boolean} [options.keepdims=false] - boolean indicating whether the reduced dimensions should be included in the returned ndarray as singleton dimensions\n* @param {(*|ndarray)} [options.sentinel] - sentinel value\n* @param {Function} predicate - predicate function\n* @param {*} [thisArg] - predicate function execution context\n* @throws {TypeError} first argument must be an ndarray-like object\n* @throws {TypeError} second argument must be an ndarray-like object\n* @throws {TypeError} options argument must be an object\n* @throws {TypeError} predicate argument must be a function\n* @throws {RangeError} dimension indices must not exceed input ndarray bounds\n* @throws {RangeError} number of dimension indices must not exceed the number of input ndarray dimensions\n* @throws {Error} must provide valid options\n* @returns {ndarray} output ndarray\n*\n* @example\n* import { isPrimitive as isEven } from '@stdlib/assert-is-even';\n* import array from '@stdlib/ndarray-array';\n* import empty from '@stdlib/ndarray-empty';\n* import getDType from '@stdlib/ndarray-dtype';\n*\n* // Create an input ndarray:\n* var x = array( [ [ [ 1.0, 2.0 ], [ 3.0, 4.0 ] ], [ [ 5.0, 6.0 ], [ 7.0, 8.0 ] ] ] );\n* // returns <ndarray>\n*\n* // Create an output ndarray:\n* var y = empty( [], {\n*     'dtype': getDType( x )\n* });\n*\n* // Perform reduction:\n* var out = assign( x, y, isEven );\n* // returns <ndarray>[ 8.0 ]\n*/\nfunction assign( x, out, options, predicate, thisArg ) {\n\tvar viewOut;\n\tvar viewX;\n\tvar nargs;\n\tvar flg;\n\tvar ctx;\n\tvar cb;\n\tvar o;\n\tvar f;\n\n\tnargs = arguments.length;\n\tif ( !isndarrayLike( x ) ) {\n\t\tthrow new TypeError( format( 'null5t', x ) );\n\t}\n\tif ( !isndarrayLike( out ) ) {\n\t\tthrow new TypeError( format( 'invalid argument. Second argument must be an ndarray-like object. Value: `%s`.', x ) );\n\t}\n\t// Case: assign( x, out, predicate )\n\tif ( nargs < 4 ) {\n\t\tcb = options;\n\t\tif ( !isFunction( cb ) ) {\n\t\t\tthrow new TypeError( format( 'null2b', cb ) );\n\t\t}\n\t}\n\t// Case: assign( x, out, options, predicate, thisArg )\n\telse if ( nargs > 4 ) {\n\t\tflg = true;\n\t\to = options;\n\t\tcb = predicate;\n\t\tif ( !isFunction( cb ) ) {\n\t\t\tthrow new TypeError( format( 'null2b', cb ) );\n\t\t}\n\t\tctx = thisArg;\n\t}\n\t// Case: assign( x, out, predicate, thisArg )\n\telse if ( isFunction( options ) ) {\n\t\tcb = options;\n\t\tctx = predicate;\n\t}\n\t// Case: assign( x, out, options, predicate )\n\telse if ( isFunction( predicate ) ) {\n\t\tflg = true;\n\t\to = options;\n\t\tcb = predicate;\n\t}\n\t// Case: find( x, out, ???, ??? )\n\telse {\n\t\tthrow new TypeError( format( 'null2b', predicate ) );\n\t}\n\t// Create reversed views of the input and output ndarrays so that we iterate from last-to-first, rather than first-to-last:\n\tviewX = reverse( x, false );\n\tviewOut = reverse( out, true );\n\n\t// Wrap the callback function to ensure that the input ndarray is passed as an argument to a provided callback and not the view:\n\tf = wrap( x, cb, ctx );\n\n\t// Delegate to `find` to perform actual search...\n\tif ( flg ) {\n\t\tfind( viewX, viewOut, o, f );\n\t} else {\n\t\tfind( viewX, viewOut, f );\n\t}\n\treturn out;\n}\n\n\n// EXPORTS //\n\nexport default assign;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2026 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Return a new ndarray containing the last elements which pass a test implemented by a predicate function along one or more ndarray dimensions.\n*\n* @module @stdlib/ndarray-find-last\n*\n* @example\n* import { isPrimitive as isEven } from '@stdlib/assert-is-even';\n* import array from '@stdlib/ndarray-array';\n* import findLast from '@stdlib/ndarray-find-last';\n*\n* // Create an input ndarray:\n* var x = array( [ [ [ 1.0, 2.0 ], [ 3.0, 4.0 ] ], [ [ 5.0, 6.0 ], [ 7.0, 8.0 ] ] ] );\n* // returns <ndarray>\n*\n* // Perform reduction:\n* var out = findLast( x, isEven );\n* // returns <ndarray>[ 8.0 ]\n*/\n\n// MODULES //\n\nimport setReadOnly from '@stdlib/utils-define-nonenumerable-read-only-property';\nimport main from './main.js';\nimport assign from './assign.js';\n\n\n// MAIN //\n\nsetReadOnly( main, 'assign', assign );\n\n\n// EXPORTS //\n\nexport default main;\n"],"names":["wrap","arr","clbk","thisArg","sh","getShape","v","idx","call","shape","i","length","complementIndices","findLast","x","options","predicate","viewX","nargs","flg","ctx","out","cb","o","f","arguments","isndarrayLike","TypeError","format","isFunction","reverse","find","assign","viewOut","setReadOnly","main"],"mappings":";;2qBA0EA,SAASA,EAAMC,EAAKC,EAAMC,GACzB,IAAIC,EAAKC,EAAUJ,GACnB,OAUA,SAAkBK,EAAGC,GACpB,OAAOL,EAAKM,KAAML,EAASG,EAjC7B,SAA4BC,EAAKE,GAChC,IAAIC,EACJ,IAAMA,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAC9BH,EAAKG,GAAMD,EAAOC,GAAMH,EAAKG,GAAM,EAEpC,OAAOH,CACR,CA2BgCK,CAAmBL,EAAKH,GAAMH,EAC5D,CACF,CC3BA,SAASY,EAAUC,EAAGC,EAASC,EAAWb,GACzC,IAAIc,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAGJ,GADAN,EAAQO,UAAUd,QACZe,EAAeZ,GACpB,MAAM,IAAIa,UAAWC,EAAQ,SAAUd,IAGxC,GAAKI,EAAQ,GAEZ,IAAMW,EADNP,EAAKP,GAEJ,MAAM,IAAIY,UAAWC,EAAQ,SAAUN,SAIpC,GAAKJ,EAAQ,EAAI,CAIrB,GAHAC,GAAM,EACNI,EAAIR,GAEEc,EADNP,EAAKN,GAEJ,MAAM,IAAIW,UAAWC,EAAQ,SAAUN,IAExCF,EAAMjB,CACN,MAEI,GAAK0B,EAAYd,GACrBO,EAAKP,EACLK,EAAMJ,MAGF,KAAKa,EAAYb,GAOrB,MAAM,IAAIW,UAAWC,EAAQ,SAAUZ,IANvCG,GAAM,EACNI,EAAIR,EACJO,EAAKN,CAKL,CAcD,OAZAC,EAAQa,EAAShB,GAAG,GAGpBU,EAAIxB,EAAMc,EAAGQ,EAAIF,GAIhBC,EADIF,EACEY,EAAMd,EAAOM,EAAGC,GAEhBO,EAAMd,EAAOO,GAGbM,EAAST,GAAK,EACtB,CCnDA,SAASW,EAAQlB,EAAGO,EAAKN,EAASC,EAAWb,GAC5C,IAAI8B,EACAhB,EACAC,EACAC,EACAC,EACAE,EACAC,EACAC,EAGJ,GADAN,EAAQO,UAAUd,QACZe,EAAeZ,GACpB,MAAM,IAAIa,UAAWC,EAAQ,SAAUd,IAExC,IAAMY,EAAeL,GACpB,MAAM,IAAIM,UAAWC,EAAQ,iFAAkFd,IAGhH,GAAKI,EAAQ,GAEZ,IAAMW,EADNP,EAAKP,GAEJ,MAAM,IAAIY,UAAWC,EAAQ,SAAUN,SAIpC,GAAKJ,EAAQ,EAAI,CAIrB,GAHAC,GAAM,EACNI,EAAIR,GAEEc,EADNP,EAAKN,GAEJ,MAAM,IAAIW,UAAWC,EAAQ,SAAUN,IAExCF,EAAMjB,CACN,MAEI,GAAK0B,EAAYd,GACrBO,EAAKP,EACLK,EAAMJ,MAGF,KAAKa,EAAYb,GAOrB,MAAM,IAAIW,UAAWC,EAAQ,SAAUZ,IANvCG,GAAM,EACNI,EAAIR,EACJO,EAAKN,CAKL,CAcD,OAZAC,EAAQa,EAAShB,GAAG,GACpBmB,EAAUH,EAAST,GAAK,GAGxBG,EAAIxB,EAAMc,EAAGQ,EAAIF,GAGZD,EACJY,EAAMd,EAAOgB,EAASV,EAAGC,GAEzBO,EAAMd,EAAOgB,EAAST,GAEhBH,CACR,CCtFAa,EAAAC,EAAA,SAAAH"}